!function(a){function R(a,b){return bw.type(a.indexOf)=="function"?!!~a.indexOf(b):b in a}function S(a,b,c){c=c===e,b||(b=a,a={});for(var d in b)c&&d in a||(a[d]=b[d]);return a}function T(a){return String(a).replace(q,r)}function U(a){return W(a,i.call(arguments,1))}function V(a){return N[a]||c}function W(a,b,c){return String(a).replace(c||h,function(a,c){return b[c]||""})}function X(a,b){return d.hasOwnProperty.call(a,b)}function Y(a){return typeof a=="function"}function Z(a){return bw.type(a)=="object"}function $(a){return typeof a=="string"}function _(a,b,c){return c||(c=a),a.reduce(function(d,e,f){var g=b.call(c,e,f,a);return j.blank(g)||d.push(g),d},[])}function ba(a){switch(bw.type(a)){case b:return b;case"number":return!isNaN(a);case"string":return a!="";case"array":return!!a.length;case"object":for(var c in a)if(c)return e}return b}function bb(a){if(a===f)return f;var b=i.call(arguments,1),c;if(b.length==1){if(b[0]===f)return f;if(!~b[0].indexOf("."))return a[b[0]];b=b[0].split(".")}while(c=b.shift()){if(!(c in Object(a)))return f;a=a[c]}return a}function bc(a){return d.toString.call(a)}function bd(a){if(a===f||a===c)return b;var d=bc(a).split(" ")[1].toLowerCase();return d=d.substring(0,d.length-1),x.test(d)?"htmlcollection":z.test(d)?"htmlelement":B.test(d)?"global":d}function be(b,c){this[m]={},this[n]=[a],c!==f&&(this.hasFallback=e,this.fallback=c),j.exists(b)&&this.push(b)}function bf(a,b,d,e){if(!a)return this;d=d===f?-1:d-2,e=e===f?0:e,this.index=d,this.index1=d+1,this.items=j.iterable(a)?a:c,this.type=bw.type(a),this.type=="object"&&(this.items=Object.values(a),this.keys=Object.keys(a),this.firstKey=this.keys[0],this.lastKey=this.keys[this.keys.length-1]),this.items&&(this.count=e?e:this.items.length,this.first=this.items[0],this.last=this.items[this.count-1]),b.items!=f&&(this.parent=b)}function bg(a){this.__data=bw.type(a)=="array"?a:[]}function bh(a,b){return!ba(b)||a.push(b),a}function bi(a,b){return b.reduce(function(b,c,d,e){if(d==0)return bu(a,c);var f="",g,h=c.indexOf(":");return~h?(g=c.substring(0,h),f=c.substring(h+1)):g=c,!f||(f=", "+f.split(",").map(function(a){return bu(this,a)},a).join(", ")),U(P,bp(g),g,bu(a,b),f,s.dict)},"")}function bj(a,b){var c=[u],d;while(d=b.shift())c.push(bn(a,d,b));return c.push(t),c.join("\r\n")}function bk(a){return a.replace(A,"").replace(D,"\n").replace(J," ").trim()}function bl(b,c){b.debug&&typeof console!="undefined"&&(console.info(b.id),console.log(c));var d=new Function("root",s.filter,s.assert,s.util,s.dict,c);return d.bind(b,a,S(b.filters,bw.Filter.all(),e),j,l)}function bm(a){a.currentIterKeys=[];var b=bl(a,bj(a,bq(a.__tpl__)));return delete a.currentIterKeys,b}function bn(a,b,c){var d;return(d=bw.Tag.get(b))?(b=c.shift(),d.emit(w,a,b,c)):bv(U('"{0}"',b.replace(y,"\\$1")))}function bo(a,b){b=bk(b);switch(b){case"AND":return" && ";case"OR":return" || "}return R(b,"|")||R(b,p)?(" "+b+p).replace(I,function(b){return j.blank(b)||b==p?"":bi(a,bk(b).split("|"))}):bu(a,b)}function bp(a){return j[a]?s.assert:l[a]?s.util:s.filter}function bq(a){return a.replace(K,M).split(L).reduce(bh,[])}function br(a,b){switch(bw.type(a)){case"boolean":case"number":case"string":return String(a);case"date":return a.toDateString();case"array":return _(a,br).join(", ");case"object":return m in a?br(a.dict):(b=a.toString())!="[object Object]"?b:_(Object.values(a),br).join(", ");case"htmlelement":return a.textContent||a.text||a.innerText;case"htmlcollection":return _(i.call(a),function(a){return br(a)}).join(", ")}return""}function bs(a){return this==a||j.startsWith(this,a+".")}function bt(a,b){return a.length?a.some(function(a){return a.some(bs,b)}):0}function bu(a,b){var c=a.currentIterKeys||[];return b=bk(b),R(b,".call(")||F.test(b)||j.startsWith(b,'"')&&j.endsWith(b,'"')||j.startsWith(b,"'")&&j.endsWith(b,"'")||!isNaN(b)?b:j.startsWith(b,"$_.")||j.startsWith(b,"iter.")||c.length&&bt(c,b)||b in g?b.replace(G,H):U('$C.get( "{0}" )',b)}function bv(a){return U("{0}.push( {1} );",s.output,a.replace(/[\n\r]/gm,"\\n"))}function bw(){var a=i.call(arguments),d=Z(a[a.length-1])?a.pop():Z(a[0])?a.shift():c;if(!(this instanceof bw))return Z(d)?new bw(a.join(""),d):new bw(a.join(""));!d||o.forEach(function(a){a in d&&(this[a]=d[a],delete d[a])},this),this.filters=d||{},this.__tpl__=a.join(""),N[bx(this)]=this,this.compiled&&(this.compiled=b,by(this))}function bx(a){return a.id||(a.id=U(O,++v)),a.id}function by(a){return a.compiled||(a.compiled=e,a._parse=bm(a)),a}function bz(a){this.compiled||by(this),this.__dict__=a;var b=this._parse(a);return delete this.__dict__,b}function bA(a){function d(a,b,d){!d&&a in c||(c[a]=b)}function f(a,b){switch(typeof b){case"string":d(b,arguments[2],a);break;case"object":for(var c in b)d(c,b[c],a)}return this}var c={};!Z(a)||S(c,a),this.all=function(){return S(c)},this.add=function(){return f.call(this,b,arguments[0],arguments[1])},this.get=function(a){return c[a]},this.replace=function(){return f.call(this,e,arguments[0],arguments[1])}}"use strict";var b=!1,c=null,d=Object.prototype,e=!0,f,g="__ASSERT__ __CONTEXT__ __FILTER_ __OUTPUT__ __UTIL__ $_ document false global instanceof null true typeof undefined window".split(" ").reduce(function(a,b){return a[b]=e,a},Object.create(c)),h=/\$?\{([^\}\s]+)\}/g,i=[].slice,j={blank:function(a){return!ba(a)||$(a)&&!a.trim()||!E.test(a)},contains:R,endsWith:function(a,b){a=String(a);var c=a.length-b.length;return c>=0&&a.lastIndexOf(b)==c},empty:function(a){return!ba(a)},equals:function(a,b){return a==b},exists:function(a){return typeof a=="number"?!isNaN(a):a!==f&&a!==c},is:function(a,b){return a===b},isEven:function(a){return!(parseInt(a,10)&1)},isOdd:function(a){return!(parseInt(a,10)&1)},isTPL:function(a){return!!V(U(Q,this.id,a))||!!V(a)},iterable:function(a){return C.test(bw.type(a))},notEmpty:ba,startsWith:function(a,b){return String(a).indexOf(b)===0}},k={},l={context:function(a,b){return new be(a,b)},output:function(a){return new bg(a)},iter:function(a,b,c,d){return new bf(a,b,c,d)},objectify:function(a,b){var c={};return c[b]=a,c},parse:function(a,c,d){c=String(c).trim();var f=V(U(Q,this.id,c))||V(c);if(Z(a)&&d!==this.__dict__){switch(bw.type(d)){case"object":break;case b:d={};break;default:d={__MIXINS__:d}}a=S(d,a,e)}return f?f.parse(a):this.fallback},stop:function(a){a.stop()},type:function(a){return bw.type(a)}},m="__tpl_cs_cached_keys",n="__tpl_cs_stack",o=["compiled","debug","fallback","id"],p="<~>",q=/([-\*\+\?\.\|\^\$\/\\\(\)[\]\{\}])/g,r="\\$1",s={assert:"__ASSERT__",dict:"__CONTEXT__",filter:"__FILTER__",output:"__OUTPUT__",util:"__UTIL__"},t=U('$C.destroy(); return {0}.join( "" );\n ',s.output),u=U("var $C = {0}.context( {1}, this.fallback ), $_ = $C.current(), iter = {0}.iter(), {2} = {0}.output(), U;",s.util,s.dict,s.output),v=999,w,x=/htmlcollection|nodelist/,y=/(['"])/g,z=/^html\w+?element$/,A=new RegExp(p,"gm"),B=/global|window/,C=/array|htmlcollection|object|arguments|nodelist/,D=/[\r\n]+/g,E=/\S/,F=/[\(\)\[\]\{\}\?\*\+\/<>%&=!-]/,G=/\.(\d+)(\.?)/g,H="['$1']$2",I=new RegExp("\\s*([^\\|]+(?:\\|[^\\|]+?)){0,}"+p,"g"),J=/\s+/g,K,L="<__SPLIT__TEMPLATE__HERE__>",M=["","$1","$2",""].join(L),N={},O="t8-anon-{0}",P='{0}["{1}"].call( this, {2}{3}, {4} )',Q="{0}.{1}";Object.values||(Object.values=function(a){var b,c=[];for(b in a)!X(a,b)||c.push(a[b]);return c}),be.prototype={current:function(){return(this[n][0]||{}).dict},destroy:function(){return this.destroyed=e,delete this[m],delete this[n],this},get:function(a){var b=this[m],c=-1,d,e,g=this[n],h=g.length,i;while(++c<h){e=g[c],d=e.dict;if(a in b&&d===b[a].o)return b[a].v;if((i=bb(d,a))!==f)return b[a]={o:d,v:i},e[m].push(a),b[a].v}return this.hasFallback?this.fallback:f},pop:function(){return this[n].shift()},push:function(a){var b={dict:a};return b[m]=[],this[n].unshift(b),this}},bf.prototype={hasNext:function(){return this.stopped||isNaN(this.index)||!this.items||++this.index>=this.count?b:(this.index>=this.count-1&&(this.isLast=e),this.current=this.items[this.index],this.previous=this.items[this.index-1]||f,this.next=this.items[++this.index1]||f,this.type=="object"&&(this.key=this.keys[this.index],this.previousKey=this.keys[this.index-1]||f,this.nextKey=this.keys[this.index1]||f),this)},stop:function(){return this.stopped=e,this}},bg.prototype={join:function(){return this.__data.join("")},push:function(a){return this.__data.push(br(a)),this}},w={assembleparts:bj,clean:bk,compiletpl:bl,createtpl:bm,emittag:bn,fnvar:s,formatstatement:bo,get:bu,util:l,wrap:bv},bw.prototype={compiled:b,debug:b,fallback:"",parse:bz},S(bw,{copy:S,escapeRE:T,format:U,get:V,gsub:W,stringify:br,tostr:bc,type:bd}),bw.Assert=new bA(j),bw.Filter=new bA(k),bw.Statement=new bA,bw.Tag=new function(){function d(b){a.forEach(f,b),S(this,b),c[this.start]=this}function f(a){if(!(a in this))throw new TypeError(U("A Templ8 Tag requires an {0}",b[a]))}var a="emit end start".split(" "),b={emit:"emit function",end:"end tag definition",start:"start tag definition"},c={};this.all=function(){return S(c)},this.compileRegExp=function(){var a=[],b=[],d;for(d in c)a.push(T(c[d].end.substring(0,1))),b.push(T(c[d].start.substring(1)));return K=new RegExp("(\\{["+b.join("")+"])\\s*(.+?)\\s*(["+a.join("")+"]\\})","gm")},this.create=function(a,b){return new d(a),b===e||this.compileRegExp(),this},this.get=function(a){return c[a]}};var bB=[{start:"{{",end:"}}",emit:function(a,b,c,d){var e,f,g,h;if(c=="")throw new SyntaxError("Templ8 missing key in value declaration.");!bI.test(c)||(e=R(c,"|")?(c.match(bH)||bC).filter(ba):c.match(bH));if(!e||e.length<=2)return a.wrap(a.formatstatement(b,c));e.shift(),h=a.formatstatement(b,e.shift()),g=bD(e.shift().toLowerCase()),f=e.join(" ");if(!g||!f)throw new SyntaxError("Templ8 missing tag or statement in one liner value declaration.");return g(a,b,f,d)+a.wrap(h)+bD("endif")}},{start:"{%",end:"%}",emit:function(a,b,c,d){if(c=="")throw new SyntaxError("Templ8 missing key in statement declaration.");var e,f,g;if(!(g=bD(c.toLowerCase()))){e=c.split(" "),g=bD(e.shift().toLowerCase());if(e.length==0&&$(g))return g;f=e.join(" ");if(!g||!f)throw new SyntaxError("Templ8 missing tag or statement in statement declaration.")}if(!g)throw new SyntaxError(U("Templ8 tag: {0} does not exist.",g));return Y(g)?g(a,b,f,d):g}},{start:"{[",end:"]}",emit:function(a,b,c,d){c=c.replace(bE,"$1").split("for each");var e,f,g,h,i=a.clean(c.shift()),j=a.clean(c.pop()).match(bF);return c=[],j.shift(),h=j.shift(),g=j.shift(),j.length>=2&&(f=j.shift(),e=j.shift()),c.push(bD("for")(a,b,(ba(h)?h.match(bG,"$1").join(",")+" in ":"")+g,d)),!e||c.push(bD(f||"if")(a,b,e,d)),c.push(a.wrap(i.split(" ").map(function(c){return a.formatstatement(b,c)}).join(" "))),!e||c.push(bD("endif")),c.push(bD("endfor")(a,b)),c.join("")}},{start:"{:",end:":}",emit:function(a,b,c){return a.formatstatement(b,c)+";"}},{start:"{#",end:"#}",emit:function(a,b,c){return["\n/*",c,"*/\n"].join(" ")}}],bC=[],bD=bw.Statement.get,bE=/\s*(,)\s*/g,bF=/^\(\s*(.*?)(?:\bin\b){0,1}(.*?)\s*\)\s*(if|unless){0,1}\s*(.*)$/i,bG=/(\w+)/g,bH=/^(.*?)\s+(if|unless)\s+(.*)|$/i,bI=/\s+(if|unless)\s+/i;bB.forEach(function(a){bw.Tag.create(a,e)}),bw.Tag.compileRegExp(),function(){function g(a,b,c){return c.split(" ").map(function(c){return b(a,c)}).join(" ")}var a={"for":function(a,e,g){var h,i,j,k=a.clean(g).match(b),l,m=[],n="U",o=a.fnvar;return k===c?i=g:(k.shift(),h=k.pop()||f,l=k.pop()||f,i=k.pop()||k.pop(),j=(k.pop()||"").match(d)),i=a.formatstatement(e,i),m.push(U(["\n\rif ( {0}.iterable( {1} ) ) iter = {2}.iter( {1}, iter, {3}, {4} );","while ( iter.hasNext() ) {","$_ = iter.current;","$C.push( iter.current );\n\r"].join("\n\r"),o.assert,i,o.util,l||n,h||n)),j&&j.length>0&&(e.currentIterKeys.unshift(j),j.length<2?m.push(U("var {0} = iter.current;\n\r",j[0])):j.length>=2&&m.push(U("var {0} = iter.key || iter.index, {1} = iter.current;\n\r",j[0],j[1]))),m.join("")},forempty:"\n\r}\n\rif ( iter.count <= 0 || !iter.items )\n\r{\n\r",endfor:function(a,b){return b.currentIterKeys.shift(),U(["\n\r$C.pop();","}","if ( $C.current() === iter.current ) { $C.pop(); }","iter = iter.parent || {0}.iter();","$_ = iter.current || $C.current();\n\r"].join("\n\r"),a.fnvar.util)},"if":function(a,b,c){return U("if ( {0} ) { ",g(b,a.formatstatement,c))},elseif:function(a,b,c){return U(" } else if ( {0} ) { ",g(b,a.formatstatement,c))},"else":" } else { ",endif:" }",sub:function(a,b,c,d){var f="endsub",g,h=c.trim(),i,j;return g=d.indexOf([f,h].join(" ")),g>-1||(g=d.indexOf(f)),i=d.splice(0,g+1),i.splice(i.length-2,i.length),h=U("{0}.{1}",b.id,h),j=new bw("",bw.copy({debug:b.debug,fallback:b.fallback,id:h},b.filters)),j.currentIterKeys=[],j.__tpl__=i.join(""),j._parse=a.compiletpl(j,a.assembleparts(j,i)),delete j.currentIterKeys,j.compiled=e,""},unless:function(a,b,c){return U("if ( !( {0} ) ) { ",g(b,a.formatstatement,c))}},b=/^(\[[^,]+,\s*[^\]]+\]|[^\s]+)(?:\s+in\s+([^\s\[]+)){0,1}\s*(?:\[?(\d+)\.+(\d*)]*\]?){0,1}/i,d=/(\w+)/g;bw.Statement.add(a),bw.Statement.add("elsif",a.elseif)}(),bw.Filter.add({capitalize:function(a){return a=bw.stringify(a),a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},count:function(a){switch(bw.type(a)){case"array":case"htmlcollection":case"string":return a.length;case"object":return Object.keys(a).length}return 0},crop:function(a,b){return a=bw.stringify(a),b=parseInt(b,10)||50,a.length>b?a.substring(0,b/2)+"..."+a.substring(a.length-b/2):a},def:function(a,b){return j.blank(a)?b:a},first:function(a){switch(bw.type(a)){case"array":return a[0];case"string":return a.charAt(0)}},join:function(a,b){return"join"in Object(a)&&typeof a.join=="function"?a.join(b):a},last:function(a){switch(bw.type(a)){case"array":return a[a.length-1];case"string":return a.charAt(a.length-1)}},lowercase:function(a){return bw.stringify(a).toLowerCase()},prefix:function(a,b){return b+a},suffix:function(a,b){return a+b},truncate:function(a,b){return a=bw.stringify(a),b=parseInt(b,10)||50,a.length>b?a.substring(0,b)+"...":a},uppercase:function(a){return bw.stringify(a).toUpperCase()},wrap:function(a,b,c){return b+a+(c||b)}}),typeof global=="undefined"||(a=global),bw.global=a,typeof module!="undefined"&&"exports"in module?module.exports=bw:a.Templ8=bw}(this)