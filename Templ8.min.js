!function(a){function _(a,b){return bG.type(a.indexOf)==h?!!~a.indexOf(b):b in a}function ba(a,b,c){c=c===e,b||(b=a,a={});for(var d in b)c&&d in a||(a[d]=b[d]);return a}function bb(a){return String(a).replace(A,B)}function bc(a){return be(a,s.call(arguments,1))}function bd(a){return X[a]||c}function be(a,b,c){return String(a).replace(c||r,function(a,c){return b[c]||""})}function bf(a,b){return d.hasOwnProperty.call(a,b)}function bg(a){return typeof a==h}function bh(a){return bG.type(a)==n}function bi(a){return typeof a==o}function bj(a,b,c){return c||(c=a),a.reduce(function(d,e,f){var g=b.call(c,e,f,a);return t.blank(g)||d.push(g),d},[])}function bk(a){switch(bG.type(a)){case b:return b;case m:return!isNaN(a);case o:return a!="";case g:return!!a.length;case n:for(var c in a)if(c)return e}return b}function bl(a){if(a===f)return f;var b=s.call(arguments,1),c;if(b.length==1){if(b[0]===f)return f;if(!~b[0].indexOf("."))return a[b[0]];b=b[0].split(".")}while(c=b.shift()){if(!(c in a))return f;a=a[c]}return a}function bm(a){return d.toString.call(a)}function bn(a){if(a===f||a===c)return b;var d=bm(a).split(" ")[1].toLowerCase();return d=d.substring(0,d.length-1),H.test(d)?j:J.test(d)?k:L.test(d)?i:d}function bo(b,c){this[w]={},this[x]=[a],c!==f&&(this.hasFallback=e,this.fallback=c),t.exists(b)&&this.push(b)}function bp(a,b,d,e){if(!a)return this;d=d===f?-1:d-2,e=e===f?0:e,this.index=d,this.index1=d+1,this.items=t.iterable(a)?a:c,this.type=bG.type(a),this.type==n&&(this.items=Object.values(a),this.keys=Object.keys(a),this.firstKey=this.keys[0],this.lastKey=this.keys[this.keys.length-1]),this.items&&(this.count=e?e:this.items.length,this.first=this.items[0],this.last=this.items[this.count-1]),b.items!=f&&(this.parent=b)}function bq(a){this.__data=bG.type(a)==g?a:[]}function br(a,b){return!bk(b)||a.push(b),a}function bs(a,b){return b.reduce(function(b,c,d,e){if(d==0)return bE(a,c);c=c.split(":");var f="",g=c.shift();return!bi(c[0])||(f=", "+c[0].split(",").map(function(a){return bE(this,a)},a).join(", ")),bc(Z,bz(g),g,bE(a,b),f,C.dict)},"")}function bt(a,b){var c=[E],d;while(d=b.shift())c.push(bx(a,d,b));return c.push(D),c.join("\r\n")}function bu(a){return a.replace(K,"").replace(N,"\n").replace(T," ").trim()}function bv(b,c){b.debug&&typeof console!=p&&(console.info(b.id),console.log(c));var d=new Function("root",C.filter,C.assert,C.util,C.dict,c);return d.bind(b,a,ba(b.filters,bG.Filter.all(),e),t,v)}function bw(a){a.currentIterKeys=[];var b=bv(a,bt(a,bA(a.__tpl__)));return delete a.currentIterKeys,b}function bx(a,b,c){var d;return(d=bG.Tag.get(b))?(b=c.shift(),d.emit(G,a,b,c)):bF(bc('"{0}"',b.replace(I,"\\$1")))}function by(a,b){return b=bu(b),_(b,"|")||_(b,z)?(" "+b+z).replace(S,function(b){return t.blank(b)||b==z?"":bs(a,bu(b).split("|"))}):bE(a,b)}function bz(a){return t[a]?C.assert:v[a]?C.util:C.filter}function bA(a){return a.replace(U,W).split(V).reduce(br,[])}function bB(a,b){switch(bG.type(a)){case"boolean":case m:case o:return String(a);case"date":return a.toDateString();case g:return bj(a,bB).join(", ");case n:return w in a?bB(a.dict):(b=a.toString())!="[object Object]"?b:bj(Object.values(a),bB).join(", ");case k:return a.textContent||a.text||a.innerText;case j:return bj(s.call(a),function(a){return bB(a)}).join(", ")}return""}function bC(a){return this==a||t.startsWith(this,a+".")}function bD(a,b){return a.length?a.some(function(a){return a.some(bC,b)}):0}function bE(a,b){var c=a.currentIterKeys||[];return b=bu(b),_(b,".call(")||P.test(b)||t.startsWith(b,'"')&&t.endsWith(b,'"')||t.startsWith(b,"'")&&t.endsWith(b,"'")||!isNaN(b)?b:t.startsWith(b,"$_.")||t.startsWith(b,"iter.")||c.length&&bD(c,b)||b in q?b.replace(Q,R):bc('$C.get( "{0}" )',b)}function bF(a){return bc("{0}.push( {1} );",C.output,a.replace(/[\n\r]/gm,"\\n"))}function bG(){var a=s.call(arguments),d=bh(a[a.length-1])?a.pop():bh(a[0])?a.shift():c;if(!(this instanceof bG))return bh(d)?new bG(a.join(""),d):new bG(a.join(""));!d||y.forEach(function(a){if(!(a in d))return;this[a]=d[a],delete d[a]},this),this.filters=d||{},this.__tpl__=a.join(""),X[bH(this)]=this,this.compiled&&(this.compiled=b,bI(this))}function bH(a){return a.id||(a.id=bc(Y,++F)),a.id}function bI(a){return a.compiled||(a.compiled=e,a._parse=bw(a)),a}function bJ(a){return this.compiled||bI(this),this._parse(a)}function bK(a){function d(a,b,d){!d&&a in c||(c[a]=b)}var c={};!bh(a)||ba(c,a),this.all=function(){return ba(c)},this.add=function(a){switch(typeof a){case o:d(a,arguments[1],b);break;case n:for(var c in a)d(c,a[c],b)}return this},this.get=function(a){return c[a]},this.replace=function(a){switch(typeof a){case o:d(a,arguments[1],e);break;case n:for(var b in a)d(b,a[b],e)}return this}}"use strict";var b=!1,c=null,d=Object.prototype,e=!0,f,g="array",h="function",i="global",j="htmlcollection",k="htmlelement",l="nodelist",m="number",n="object",o="string",p="undefined",q={__ASSERT__:e,__CONTEXT__:e,__FILTER_:e,__OUTPUT__:e,__UTIL__:e,$_:e,document:e,"false":e,global:e,"instanceof":e,"null":e,"true":e,"typeof":e,"undefined":e,window:e},r=/\$?\{([^\}\s]+)\}/g,s=[].slice,t={blank:function(a){return!bk(a)||!a.trim()||!O.test(a)},contains:_,endsWith:function(a,b){a=String(a);var c=a.length-b.length;return c>=0&&a.lastIndexOf(b)==c},empty:function(a){return!bk(a)},equals:function(a,b){return a==b},exists:function(a){return typeof a==m?!isNaN(a):a!==f&&a!==c},is:function(a,b){return a===b},isEven:function(a){return!(parseInt(a,10)&1)},isOdd:function(a){return!(parseInt(a,10)&1)},isTPL:function(a){return!!bd(bc($,this.id,a))||!!bd(a)},iterable:function(a){return M.test(bG.type(a))},notEmpty:bk,startsWith:function(a,b){return String(a).indexOf(b)===0}},u={},v={context:function(a,b){return new bo(a,b)},output:function(a){return new bq(a)},iter:function(a,b,c,d){return new bp(a,b,c,d)},parse:function(a,b){b=String(b).trim();var c=bd(bc($,this.id,b))||bd(b);return c?c.parse(a,this.filters):this.fallback},stop:function(a){a.stop()},type:function(a){return bG.type(a)}},w="__tpl_cs_cached_keys",x="__tpl_cs_stack",y=["compiled","debug","fallback","id"],z="<~>",A=/([-\*\+\?\.\|\^\$\/\\\(\)[\]\{\}])/g,B="\\$1",C={assert:"__ASSERT__",dict:"__CONTEXT__",filter:"__FILTER__",output:"__OUTPUT__",util:"__UTIL__"},D=bc('$C.destroy(); return {0}.join( "" );\n ',C.output),E=bc("var $C = {0}.context( {1}, this.fallback ), $_ = $C.current(), iter = {0}.iter(), {2} = {0}.output(), U;",C.util,C.dict,C.output),F=999,G,H=new RegExp(bc("{0}|{1}",j,l)),I=/(['"])/g,J=/^html\w+?element$/,K=new RegExp(z,"gm"),L=/global|window/,M=new RegExp(bc("{0}|{1}|{2}|arguments|{3}",g,j,n,l)),N=/[\r\n]+/g,O=/\S/,P=/[\(\)\[\]\{\}\?\*\+\/<>%&=!-]/,Q=/\.(\d+)(\.?)/g,R="['$1']$2",S=new RegExp("\\s*([^\\|]+(?:\\|[^\\|]+?)){0,}"+z,"g"),T=/\s+/g,U,V="<__SPLIT__TEMPLATE__HERE__>",W=["","$1","$2",""].join(V),X={},Y="tpl-anon-{0}",Z='{0}["{1}"].call( this, {2}{3}, {4} )',$="{0}.{1}";Object.values||(Object.values=function(a){var b,c=[];for(b in a)!bf(a,b)||c.push(a[b]);return c}),bo.prototype={current:function(){return(this[x][0]||{}).dict},destroy:function(){return this.destroyed=e,delete this[w],delete this[x],this},get:function(a){var b=this[w],c=-1,d,e,g=this[x],h=g.length,i;while(++c<h){e=g[c],d=e.dict;if(a in b&&d===b[a].o)return b[a].v;if((i=bl(d,a))!==f)return b[a]={o:d,v:i},e[w].push(a),b[a].v}return this.hasFallback?this.fallback:f},pop:function(){return this[x].shift()},push:function(a){var b={dict:a};return b[w]=[],this[x].unshift(b),this}},bp.prototype={hasNext:function(){return this.stopped||isNaN(this.index)||!this.items||++this.index>=this.count?b:(this.index>=this.count-1&&(this.isLast=e),this.current=this.items[this.index],this.previous=this.items[this.index-1]||f,this.next=this.items[++this.index1]||f,this.type==n&&(this.key=this.keys[this.index],this.previousKey=this.keys[this.index-1]||f,this.nextKey=this.keys[this.index1]||f),this)},stop:function(){return this.stopped=e,this}},bq.prototype={join:function(){return this.__data.join("")},push:function(a){return this.__data.push(bB(a)),this}},G={assembleparts:bt,clean:bu,compiletpl:bv,createtpl:bw,emittag:bx,fnvar:C,formatstatement:by,get:bE,util:v,wrap:bF},bG.prototype={compiled:b,debug:b,fallback:"",parse:bJ},ba(bG,{copy:ba,escapeRE:bb,format:bc,get:bd,gsub:be,stringify:bB,tostr:bm,type:bn}),bG.Assert=new bK(t),bG.Filter=new bK(u),bG.Statement=new bK,bG.Tag=new function(){function d(b){a.forEach(f,b),ba(this,b),c[this.start]=this}function f(a){if(!(a in this))throw new TypeError(bc("A Templ8 Tag requires an {0}",b[a]))}var a="emit end start".split(" "),b={emit:"emit function",end:"end tag definition",start:"start tag definition"},c={};this.all=function(){return ba(c)},this.compileRegExp=function(){var a=[],b=[],d;for(d in c)a.push(bb(c[d].end.substring(0,1))),b.push(bb(c[d].start.substring(1)));return U=new RegExp("(\\{["+b.join("")+"])\\s*(.+?)\\s*(["+a.join("")+"]\\})","gm")},this.create=function(a,b){return new d(a),b===e||this.compileRegExp(),this},this.get=function(a){return c[a]}};var bL=[{start:"{{",end:"}}",emit:function(a,b,c,d){var e,f,g,h;if(c=="")throw new SyntaxError("Templ8 missing key in value declaration.");!bS.test(c)||(e=_(c,"|")?(c.match(bR)||bM).filter(bk):c.match(bR));if(!e||e.length<=2)return a.wrap(a.formatstatement(b,c));e.shift(),h=a.formatstatement(b,e.shift()),g=bN(e.shift().toLowerCase()),f=e.join(" ");if(!g||!f)throw new SyntaxError("Templ8 missing tag or statement in one liner value declaration.");return g(a,b,f,d)+a.wrap(h)+bN("endif")}},{start:"{%",end:"%}",emit:function(a,b,c,d){if(c=="")throw new SyntaxError("Templ8 missing key in statement declaration.");var e,f,g;if(!(g=bN(c.toLowerCase()))){e=c.split(" "),g=bN(e.shift().toLowerCase());if(e.length==0&&bi(g))return g;f=e.join(" ");if(!g||!f)throw new SyntaxError("Templ8 missing tag or statement in statement declaration.")}if(!g)throw new SyntaxError(bc("Templ8 tag: {0} does not exist.",g));return bg(g)?g(a,b,f,d):g}},{start:"{[",end:"]}",emit:function(a,b,c,d){c=c.replace(bO,"$1").split("for each");var e,f,g,h,i=a.clean(c.shift()),j=a.clean(c.pop()).match(bP);return c=[],j.shift(),h=j.shift(),g=j.shift(),j.length>=2&&(f=j.shift(),e=j.shift()),c.push(bN("for")(a,b,(bk(h)?h.match(bQ,"$1").join(",")+" in ":"")+g,d)),!e||c.push(bN(f||"if")(a,b,e,d)),c.push(a.wrap(i.split(" ").map(function(c){return a.formatstatement(b,c)}).join(" "))),!e||c.push(bN("endif")),c.push(bN("endfor")(a,b)),c.join("")}},{start:"{:",end:":}",emit:function(a,b,c){return a.formatstatement(b,c)+";"}},{start:"{#",end:"#}",emit:function(a,b,c){return["\n/*",c,"*/\n"].join(" ")}}],bM=[],bN=bG.Statement.get,bO=/\s*(,)\s*/g,bP=/^\(\s*(.*?)(?:\bin\b){0,1}(.*?)\s*\)\s*(if|unless){0,1}\s*(.*)$/i,bQ=/(\w+)/g,bR=/^(.*?)\s+(if|unless)\s+(.*)|$/i,bS=/\s+(if|unless)\s+/i;bL.forEach(function(a){bG.Tag.create(a,e)}),bG.Tag.compileRegExp(),function(){function g(a,b,c){return c.split(" ").map(function(c){return b(a,c)}).join(" ")}var a={"for":function(a,e,g){var h,i,j,k=a.clean(g).match(b),l,m=[],n="U",o=a.fnvar;return k===c?i=g:(k.shift(),h=k.pop()||f,l=k.pop()||f,i=k.pop()||k.pop(),j=(k.pop()||"").match(d)),i=a.formatstatement(e,i),m.push(bc(["\n\rif ( {0}.iterable( {1} ) ) iter = {2}.iter( {1}, iter, {3}, {4} );","while ( iter.hasNext() ) {","$_ = iter.current;","$C.push( iter.current );\n\r"].join("\n\r"),o.assert,i,o.util,l||n,h||n)),j&&j.length>0&&(e.currentIterKeys.unshift(j),j.length<2?m.push(bc("var {0} = iter.current;\n\r",j[0])):j.length>=2&&m.push(bc("var {0} = iter.key || iter.index, {1} = iter.current;\n\r",j[0],j[1]))),m.join("")},forempty:"\n\r}\n\rif ( iter.count <= 0 || !iter.items )\n\r{\n\r",endfor:function(a,b){return b.currentIterKeys.shift(),bc(["\n\r$C.pop();","}","if ( $C.current() === iter.current ) { $C.pop(); }","iter = iter.parent || {0}.iter();","$_ = iter.current || $C.current();\n\r"].join("\n\r"),a.fnvar.util)},"if":function(a,b,c){return bc("if ( {0} ) { ",g(b,a.formatstatement,c))},elseif:function(a,b,c){return bc(" } else if ( {0} ) { ",g(b,a.formatstatement,c))},"else":" } else { ",endif:" }",sub:function(a,b,c,d){var f="endsub",g,h=c.trim(),i,j;return g=d.indexOf([f,h].join(" ")),g>-1||(g=d.indexOf(f)),i=d.splice(0,g+1),i.splice(i.length-2,i.length),h=bc("{0}.{1}",b.id,h),j=new bG("",bG.copy({debug:b.debug,fallback:b.fallback,id:h},b.filters)),j.currentIterKeys=[],j.__tpl__=i.join(""),j._parse=a.compiletpl(j,a.assembleparts(j,i)),delete j.currentIterKeys,j.compiled=e,""},unless:function(a,b,c){return bc("if ( !( {0} ) ) { ",g(b,a.formatstatement,c))}},b=/^(\[[^,]+,\s*[^\]]+\]|[^\s]+)(?:\s+in\s+([^\s\[]+)){0,1}\s*(?:\[?(\d+)\.+(\d*)]*\]?){0,1}/i,d=/(\w+)/g;bG.Statement.add(a),bG.Statement.add("elsif",a.elseif)}(),bG.Filter.add({capitalize:function(a){return a=bG.stringify(a),a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},count:function(a){switch(bG.type(a)){case g:case j:case o:return a.length;case n:return Object.keys(a).length}return 0},crop:function(a,b){return a=bG.stringify(a),b=parseInt(b,10)||50,a.length>b?a.substring(0,b/2)+"..."+a.substring(a.length-b/2):a},def:function(a,b){return t.blank(a)?b:a},first:function(a){switch(bG.type(a)){case g:return a[0];case o:return a.charAt(0)}},last:function(a){switch(bG.type(a)){case g:return a[a.length-1];case o:return a.charAt(a.length-1)}},lowercase:function(a){return bG.stringify(a).toLowerCase()},prefix:function(a,b){return b+a},suffix:function(a,b){return a+b},truncate:function(a,b){return a=bG.stringify(a),b=parseInt(b,10)||50,a.length>b?a.substring(0,b)+"...":a},uppercase:function(a){return bG.stringify(a).toUpperCase()},wrap:function(a,b,c){return b+a+(c||b)}}),typeof global==p||(a=global),bG.global=a,typeof module!=p&&"exports"in module?module.exports=bG:a.Templ8=bG}(this)