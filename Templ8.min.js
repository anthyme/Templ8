!function(a){function J(b,c){return typeof b.indexOf=="function"&&!!~b.indexOf(c)||a.got(b,c)}function K(a){return String(a).replace(l,m)}function L(a){return N(a,Array.coerce(arguments,1))}function M(a){return F[a]||null}function N(a,b,c){return String(a).replace(c||d,function(a,c){return b[c]||""})}function O(a){return typeof a=="object"&&(a.constructor===Object||a.constructor===b)}function P(c,d,e){d||(d=a),e||(e=c);var f=-1,g=c.length,h=[],i;while(++f<g){i=d.call(e,c[f],f,c);switch(i){case null:case b:break;default:switch(typeof i){case"string":i.trim()===""||h.push(i);break;case"number":isNaN(i)||h.push(i);break;default:!a.iter(i)||a.len(i)||h.push(i)}}}return h}function Q(b){return!a.empty(b)}function R(c,d){this[i]=[],this.push(a.global),d!==b&&(this.hasFallback=!0,this.fallback=d),!a.exists(c)||this.push(c)}function S(c,d,e,f){var g,h;if(c===null||!a.iter(c))return this.stop();this._=c=Object(c),g=Object.keys(c);if(!(h=g.length))return this.stop();a.nativeType(c)=="object"||(g=g.map(Number)),this.empty=!1,this.count=isNaN(f)?h:f<0?h+f:f>h?h:f,this.index=e===b?-1:e-2,this.index1=this.index+1,this.firstKey=g[0],this.first=c[this.firstKey],this.lastIndex=this.count-1,this.lastKey=g[this.lastIndex],this.last=c[this.lastKey],this.keys=g,!(d instanceof S)||(this.parent=d)}function T(a){this.__data=Array.isArray(a)?a:[]}function U(b,c){return a.empty(c)||b.push(c),b}function V(a,b){return b.reduce(function(b,c,d,e){if(d==0)return bf(a,c);var f="",g,h=c.indexOf(":");return~h?(g=c.substring(0,h),f=c.substring(h+1)):g=c,!f||(f=", "+f.split(",").map(function(a){return bf(this,a)},a).join(", ")),L(H,ba(g),g,bf(a,b),f,n.dict)},"")}function W(a,b){var c=[p],d;while(d=b.shift())c.push($(a,d,b));return c.push(o),c.join("\r\n")}function X(a){return a.replace(v,"").replace(w,"\n").replace(x," ").trim()}function Y(b,c){b.debug&&typeof a.global[s]!="undefined"&&(a.global[s].info("Templ8: ",b.id,", source: "),a.global[s].log(c));var d=new Function("root","ContextStack","Iter",n.filter,n.assert,n.util,n.dict,c);return d.bind(b,a.global,R,S,a.copy(b.filters,bh.Filter.all(),!0),e,g)}function Z(a){a.currentIterKeys=[];var b=Y(a,W(a,bb(a.__tpl__)));return delete a.currentIterKeys,b}function $(a,b,c){var d;return(d=bh.Tag.get(b))?(b=c.shift(),d.emit(r,a,b,c)):bg(L('"{0}"',b.replace(u,"\\$1")))}function _(a,b){b=X(b);switch(b){case"AND":return" && ";case"OR":return" || "}return J(b,"|")||J(b,k)?(" "+b+k).replace(C,function(b){return e.blank(b)||b==k?"":V(a,X(b).split("|"))}):bf(a,b)}function ba(a){return e[a]?n.assert:g[a]?n.util:n.filter}function bb(a){return a.replace(z,E).split(D).reduce(U,[])}function bc(b,c){switch(typeof b){case"boolean":case"number":case"string":return String(b);default:switch(a.nativeType(b)){case"date":return b.toDateString();case"array":return P(b,bc).join(", ");case"object":return h in b?bc(b.dict):(c=b.toString())!="[object Object]"?c:P(Object.values(b),bc).join(", ");default:switch(a.type(b)){case"htmlelement":return b.textContent||b.text||b.innerText;case"htmlcollection":return P(Array.coerce(b),function(a){return bc(a)}).join(", ")}}}return""}function bd(a){return this==a||e.startsWith(this,a+".")}function be(a,b){return a.length?a.some(function(a){return a.some(bd,b)}):0}function bf(a,b){var d=a.currentIterKeys||[];return b=X(b),J(b,".call(")||y.test(b)||e.startsWith(b,'"')&&e.endsWith(b,'"')||e.startsWith(b,"'")&&e.endsWith(b,"'")||!isNaN(b)?b:e.startsWith(b,"$_.")||e.startsWith(b,"iter.")||d.length&&be(d,b)||b in c?b.replace(A,B):L('$C.get( "{0}" )',b)}function bg(a){return L("{0} += {1};",n.output,a.replace(t,"\\n"))}function bh(){var a=Array.coerce(arguments),b=O(a[a.length-1])?a.pop():O(a[0])?a.shift():null;if(!(this instanceof bh))return O(b)?new bh(a.join(""),b):new bh(a.join(""));!b||j.forEach(function(a){a in b&&(this[a]=b[a],delete b[a])},this),this.filters=b||{},this.__tpl__=a.join(""),F[bi(this)]=this,this.compiled&&(this.compiled=!1,bj(this))}function bi(a){return a.id||(a.id=L(G,++q)),a.id}function bj(a){return a.compiled||(a.compiled=!0,a._parse=Z(a)),a}function bk(a){this.compiled||bj(this),this.__dict__=a;var b=this._parse(a);return delete this.__dict__,b}function bl(b){function d(a,b,d){!d&&a in c||(c[a]=b)}function e(a,b){switch(typeof b){case"string":d(b,arguments[2],a);break;case"object":for(var c in b)d(c,b[c],a)}return this}var c={};!O(b)||a.copy(c,b),this.all=function(){return a.copy(c)},this.add=function(){return e.call(this,!1,arguments[0],arguments[1])},this.get=function(a){return c[a]},this.replace=function(){return e.call(this,!0,arguments[0],arguments[1])}}"use strict";var b,c="__ASSERT__ __CONTEXT__ __FILTER_ __OUTPUT__ __UTIL__ $_ document false global instanceof null true typeof undefined window".split(" ").reduce(function(a,b){return a[b]=!0,a},a.obj()),d=/\$?\{([^\}\s]+)\}/g,e={blank:function(b){return a.empty(b)||typeof b=="string"&&!b.trim()},contains:J,endsWith:function(a,b){a=String(a);var c=a.length-b.length;return c>=0&&a.lastIndexOf(b)==c},empty:a.empty,equals:function(a,b){return a==b},exists:a.exists,is:function(a,b){return a===b},isEven:function(a){return!(parseInt(a,10)&1)},isOdd:function(a){return!(parseInt(a,10)&1)},isTPL:function(a){return!!M(L(I,this.id,a))||!!M(a)},iterable:function(b){return a.iter(b)},notEmpty:Q,startsWith:function(a,b){return String(a).indexOf(b)===0}},f={},g={context:function(a,b){return new R(a,b)},output:function(a){return new T(a)},objectify:function(a,b){var c={};return c[b]=a,c},parse:function(b,c,d){c=String(c).trim();var e=M(L(I,this.id,c))||M(c);if(O(b)&&d!==this.__dict__){switch(a.nativeType(d)){case"object":break;case"null":case"undefined":d={};break;default:d={__MIXINS__:d}}b=a.copy(d,b,!0)}return e?e.parse(b):this.fallback},stop:function(a){a.stop()},stringify:bc,type:function(b){return a.type(b)}},h="__tpl_cs_cached_keys",i="__tpl_cs_stack",j=["compiled","debug","fallback","id"],k="<~>",l=/([-\*\+\?\.\|\^\$\/\\\(\)[\]\{\}])/g,m="\\$1",n={assert:"__ASSERT__",dict:"__CONTEXT__",filter:"__FILTER__",output:"__OUTPUT__",util:"__UTIL__"},o=L("$C.destroy(); return {0};\n ",n.output),p='\n"use strict";\n'+L('var $C = new ContextStack( {0}, this.fallback ), $_ = $C.current(), iter = new Iter( null ), {1} = "", U;',n.dict,n.output),q=999,r,s="console",t=/[\n\r]/gm,u=/(['"])/g,v=new RegExp(k,"gm"),w=/[\r\n]+/g,x=/\s+/g,y=/[\(\)\[\]\{\}\?\*\+\/<>%&=!-]/,z,A=/\.(\d+)(\.?)/g,B="['$1']$2",C=new RegExp("\\s*([^\\|]+(?:\\|[^\\|]+?)){0,}"+k,"g"),D="<__SPLIT__TEMPL8__HERE__>",E=["","$1","$2",""].join(D),F={},G="t8-anon-{0}",H='{0}["{1}"].call( this, {2}{3}, {4} )',I="{0}.{1}";R.prototype={current:function(){return this.top.dict},destroy:function(){return this.destroyed=!0,delete this[h],delete this[i],this},get:function(c){var d,e=this[i],f=e.length,g;while(f--){d=e[f];if(c in d.cache)return d.cache[c];if((g=Object.value(d.dict,c))!==b)return d.cache[c]=g}return this.hasFallback?this.fallback:b},pop:function(){var b=this[i].pop().dict;return this.top=this[i][this[i].length-1],b},push:function(b){return this[i].push(this.top={cache:{},dict:b}),this}},S.prototype={empty:!0,hasNext:function(){return this.stopped||this.empty?!1:(++this.index<this.lastIndex||(this.stop().isLast=!0),this.key=this.keys[this.index],this.nextKey=this.keys[++this.index1]||b,this.previousKey=this.keys[this.index-1]||b,this.current=this._[this.key],this.next=this._[this.nextKey]||b,this.previous=this._[this.previousKey]||b,this)},stop:function(){return this.stopped=!0,this}},T.prototype={join:function(){return this.__data.join("")},push:function(b){return this.__data.push(b),this}},r={assembleparts:W,clean:X,compiletpl:Y,createtpl:Z,emittag:$,fnvar:n,formatstatement:_,get:bf,util:g,wrap:bg},bh.prototype={compiled:!1,debug:!1,fallback:"",parse:bk},a.defs(bh,{m8:{value:a},escapeRE:K,format:L,get:M,gsub:N,stringify:bc},"r"),bh.Assert=new bl(e),bh.Filter=new bl(f),bh.Statement=new bl,bh.Tag=new function(){function e(c){b.forEach(f,c),a.copy(this,c),d[this.start]=this}function f(a){if(!(a in this))throw new TypeError(L("A Templ8 Tag requires an {0}",c[a]))}var b="emit end start".split(" "),c={emit:"emit function",end:"end tag definition",start:"start tag definition"},d={};this.all=function(){return a.copy(d)},this.compileRegExp=function(){var a=[],b=[],c;for(c in d)a.push(K(d[c].end.substring(0,1))),b.push(K(d[c].start.substring(1)));return z=new RegExp("(\\{["+b.join("")+"])\\s*(.+?)\\s*(["+a.join("")+"]\\})","gm")},this.create=function(a,b){return new e(a),b===!0||this.compileRegExp(),this},this.get=function(a){return d[a]}};var bm=[{start:"{{",end:"}}",emit:function(a,b,c,d){var e,f,g,h;if(c=="")throw new SyntaxError("Templ8 missing key in value declaration.");!bt.test(c)||(e=J(c,"|")?(c.match(bs)||bn).filter(Q):c.match(bs));if(!e||e.length<=2)return a.wrap(a.formatstatement(b,c));e.shift(),h=a.formatstatement(b,e.shift()),g=bo(e.shift().toLowerCase()),f=e.join(" ");if(!g||!f)throw new SyntaxError("Templ8 missing tag or statement in one liner value declaration.");return g(a,b,f,d)+a.wrap(h)+bo("endif")}},{start:"{%",end:"%}",emit:function(a,b,c,d){if(c=="")throw new SyntaxError("Templ8 missing key in statement declaration.");var e,f,g;if(!(g=bo(c.toLowerCase()))){e=c.split(" "),g=bo(e.shift().toLowerCase());if(e.length==0&&typeof g=="string")return g;f=e.join(" ");if(!g||!f)throw new SyntaxError("Templ8 missing tag or statement in statement declaration.")}if(!g)throw new SyntaxError(L("Templ8 tag: {0} does not exist.",g));return typeof g=="function"?g(a,b,f,d):g}},{start:"{[",end:"]}",emit:function(a,b,c,d){c=c.replace(bp,"$1").split("for each");var e,f,g,h,i=a.clean(c.shift()),j=a.clean(c.pop()).match(bq);return c=[],j.shift(),h=j.shift(),g=j.shift(),j.length>=2&&(f=j.shift(),e=j.shift()),c.push(bo("for")(a,b,(Q(h)?h.match(br,"$1").join(",")+" in ":"")+g,d)),!e||c.push(bo(f||"if")(a,b,e,d)),c.push(a.wrap(i.split(" ").map(function(c){return a.formatstatement(b,c)}).join(" "))),!e||c.push(bo("endif")),c.push(bo("endfor")(a,b)),c.join("")}},{start:"{:",end:":}",emit:function(a,b,c){return a.formatstatement(b,c)+";"}},{start:"{#",end:"#}",emit:function(a,b,c){return["\n/*",c,"*/\n"].join(" ")}}],bn=[],bo=bh.Statement.get,bp=/\s*(,)\s*/g,bq=/^\(\s*(.*?)(?:\bin\b){0,1}(.*?)\s*\)\s*(if|unless){0,1}\s*(.*)$/i,br=/(\w+)/g,bs=/^(.*?)\s+(if|unless)\s+(.*)|$/i,bt=/\s+(if|unless)\s+/i;bm.forEach(function(a){bh.Tag.create(a,!0)}),bh.Tag.compileRegExp(),function(){function e(a,b,c){return c.split(" ").map(function(c){return b(a,c)}).join(" ")}var b={"for":function(a,b,e){var f="U",g=f,h,i,j=a.clean(e).match(c),k=f,l=[];return j===null?h=e:(j.shift(),g=j.pop()||f,k=j.pop()||f,h=j.pop()||j.pop(),i=(j.pop()||"").match(d)),h=a.formatstatement(b,h),l.push(L(["","iter = new Iter( {0}, iter, {1}, {2} );","while ( iter.hasNext() ) {","$_ = iter.current;"].join("\n\r"),h,k,g)),i&&i.length>0&&(b.currentIterKeys.unshift(i),i.length<2?l.push(L("var {0} = iter.current;\n\r",i[0])):i.length>=2&&l.push(L("var {0} = iter.key, {1} = iter.current;\n\r",i[0],i[1]))),l.join("")},forempty:"\n\r}\n\rif ( iter.empty ) {\n\r",endfor:function(a,b){return b.currentIterKeys.shift(),L(["\n\r}","iter = iter.parent  || new Iter( null );","$_   = iter.current || $C.current(); \n\r"].join("\n\r"),a.fnvar.util)},"if":function(a,b,c){return L("if ( {0} ) { ",e(b,a.formatstatement,c))},elseif:function(a,b,c){return L(" } else if ( {0} ) { ",e(b,a.formatstatement,c))},"else":" } else { ",endif:" }",sub:function(b,c,d,e){var f="endsub",g,h=d.trim(),i,j;return g=e.indexOf([f,h].join(" ")),g>-1||(g=e.indexOf(f)),i=e.splice(0,g+1),i.splice(i.length-2,i.length),h=L("{0}.{1}",c.id,h),j=new bh("",a.copy({debug:c.debug,fallback:c.fallback,id:h},c.filters)),j.currentIterKeys=[],j.__tpl__=i.join(""),j._parse=b.compiletpl(j,b.assembleparts(j,i)),delete j.currentIterKeys,j.compiled=!0,""},unless:function(a,b,c){return L("if ( !( {0} ) ) { ",e(b,a.formatstatement,c))}},c=/^(\[[^,]+,\s*[^\]]+\]|[^\s]+)(?:\s+in\s+([^\s\[]+)){0,1}\s*(?:\[?(\d+)\.+(\d*)]*\]?){0,1}/i,d=/(\w+)/g;bh.Statement.add(b),bh.Statement.add("elsif",b.elseif)}(),bh.Filter.add({capitalize:function(a){return a=bh.stringify(a),a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},count:function(b){return a.len(b)||0},crop:function(a,b){return a=bh.stringify(a),b=parseInt(b,10)||50,a.length>b?a.substring(0,b/2)+"..."+a.substring(a.length-b/2):a},def:function(a,b){return e.blank(a)?b:a},first:function(b){switch(a.nativeType(b)){case"array":return b[0];case"string":return b.charAt(0)}},join:function(b,c){return a.got(b,"join")&&typeof b.join=="function"?b.join(c):b},last:function(b){switch(a.nativeType(b)){case"array":return b[b.length-1];case"string":return b.charAt(b.length-1)}},lowercase:function(a){return bh.stringify(a).toLowerCase()},prefix:function(a,b){return b+a},suffix:function(a,b){return a+b},truncate:function(a,b){return a=bh.stringify(a),b=parseInt(b,10)||50,a.length>b?a.substring(0,b)+"...":a},uppercase:function(a){return bh.stringify(a).toUpperCase()},wrap:function(a,b,c){return b+a+(c||b)}}),a.ENV!="commonjs"?a.def(a.global,"Templ8",a.describe({value:bh},"r")):module.exports=bh}(typeof m8!="undefined"?m8:typeof require!="undefined"?require("m8"):null)